## 들어가며

웹 어플리케이션에서 데이터를 캐시하는 것은 매우 중요하며 고성능을 얻을 수 있습니다.물론 데이터를 관계형 데이터베이스에 저장 후 직접 쿼리하여 사용자에게 제공할 수 있지만 매 요청마다 쿼리를 해야하거나 메인페이지에 사용되는 타 API에 비해 상대적으로 많이 호출되는 데이터들은 캐시하는 것이 유리할 수 있겠습니다. 먼저 간단히 Redis에 대해 알아보고 express로 구현 예제를 작성하겠습니다.

## Redis란?

**REDIS(REmote Dictionary Server)**는 메모리 기반의 “키-값” 구조 데이터 관리 시스템이며, 모든 데이터를 메모리에 저장하고 조회하기에 빠른 Read, Write 속도를 보장하는 비 관계형 데이터베이스입니다.

레디스는 크게 5가지 **< String, Set, Sorted Set, Hash, List >** 의 데이터 형식을 지원합니다.

Redis는 빠른 오픈 소스 인 메모리 키-값 데이터 구조 스토어이며, 다양한 인 메모리 데이터 구조 집합을 제공하므로 사용자 정의 애플리케이션을 손쉽게 생성할 수 있습니다.

#### 장점

-   리스트, 배열과 같은 데이터를 처리하는데 유용
-   value 값으로 다양한 데이터 형식을 지원하기 때문
-   리스트형 데이터 입력과 삭제가 MySql에 비해 10배정도 **빠르다.**
-   여러 프로세스에서 동시에 같은 key에 대한 갱신을 요청하는 경우, 데이터 부정합 방지 Atomic 처리 함수를 제공한다(원자성).
-   메모리를 활용하면서 영속적인 데이터 보존(Persistence)스냅샷 기능을 제공해 메모리 내용을 \*.rdb 파일로 저장하여 해당 시점으로 복구할 수 있다.
-   AOF : Redis의 모든 Wirte/Update 연산을 log 파일에 기록 후 서버 재시작 시 순차적으로 재실행, 데이터 복구
-   명령어로 명시적 삭제, expires를 설정하지 않으면 데이터가 삭제되지 않는다.
-   1개의 싱글 쓰레드로 수행되기 때문에, 서버 하나에 여러개의 Redis Server를 띄울 수 있다.(Master-Slave 구조)
-   master-slave 간의 복제는 **non-blocking**

#### 단점

**In-memory** 방식이기 때문에 장애 발생시 데이터 유실이 발생합니다.

따라서 중요한 데이터를 **Redis**에 저장하는 것 보다 관계형 데이터베이스에 있는 데이터를 빠른 응답을 위해 캐시하는 용도가 적합합니다. 그리고 데이터 보존을 위해 **스냅샷과 AOF** 기능을 통한 복구 방식을 주의해서 작성해야 데이터 유실에 대비할 수 있습니다.
